(function(a){a.widget("lws.lws_css_editor",{_create:function(){this.cssValues=lwsBase64.toObj(this.element.data("cssvalues"));var c=this;this.masterTable=[];this.menuTable={};this.cssObject={};this.miscValues={};var b=0;this.element.find(".lwss_selectable").each(function(){var e=a(this).data("key",b);var h=c._createSelector(e).data("key",b);var f=c._createClass(e);var g={Selectable:e,Selector:h,Class:f,Over:"no",Active:"no"};c.masterTable.push(g);++b});this._createSelectMenu();this._createCssObject();this._applyCss();this._addBackgroundSwitcher();var d=this.element.find(".lwss_centraldiv");this.popupShadow=a("<div>").addClass("lwss-popup-shadow").appendTo(d);this._addEventsAndTriggers();this._setSelectorColors();this.myStylingPanel=a("<div>").addClass("lwss_styling_panel").prependTo(d);this.myStylingPanel.lws_styling_panel();this.myStylingPanel.lws_styling_panel("setEditor",this);this.myStylingPanel.lws_styling_panel("makeCssChain",this)},_bind:function(b,c){return function(){return b.apply(c,arguments)}},_createSelectMenu:function(){var f=this.element.find(".lwss_sidemenu");for(var c=0;c<this.masterTable.length;c++){var b=this.masterTable[c].Selectable;var e=this.masterTable[c].Selector;var d=e.data("key");var g=this.masterTable[c].Class.className;if(this.menuTable[g]==undefined){myMenuSelector=a("<div>").addClass("lwss_menu_selector").data("key",d).appendTo(f);myTitle=a("<div>").addClass("lwss_ms_title").html(b.data("type")).appendTo(myMenuSelector);myClass=a("<div>").addClass("lwss_ms_class").html(g).appendTo(myMenuSelector);this.menuTable[g]=myMenuSelector}}},_createSelector:function(b){if(b.prop("nodeName")=="INPUT"){if(b.attr("type")=="password"){b.prop("disabled",true)}var c=b.parent();var d=a("<div>",{"class":"lwss_wrapper"}).appendTo(c);b.detach().appendTo(d);theSelector=a("<div>",{"class":"lwss_selector lwss_inp_sel"}).appendTo(d);theSelector.outerWidth(b.outerWidth(true)+4).outerHeight(b.outerHeight(true)+4);theSelector.css("top",b.position().top-2).css("left",b.position().left-2)}else{theSelector=a("<div>",{"class":"lwss_selector"}).prependTo(b)}return a(theSelector)},_createClass:function(c){var b=c.attr("class").split(" ");var e={};for(var d=0;d<b.length;d++){if(b[d].match(/^lws-/)){e.className="."+b[d];e.stygenName=".lwss_selectable"+e.className}}return(e)},_addBackgroundSwitcher:function(){var b=this.element.find(".lwss-main-conteneur");var e=a("<div>").addClass("lws-bg-switcher").appendTo(b);var d=a("<div>").addClass("lws-white-switcher").appendTo(e);d.click(function(){b.css("background","#ffffff")});var c=a("<div>").addClass("lws-black-switcher").appendTo(e);c.click(function(){b.css("background","#000000")})},placeSelectors:function(){this.element.find(".lwss_inp_sel").each(function(){var c=a(this);var b=c.parent().find(".lwss_selectable");c.outerWidth(b.outerWidth(true)+4).outerHeight(b.outerHeight(true)+4);c.css("top",b.position().top-2).css("left",b.position().left-2)})},_setSelectorColors:function(){for(var e=0;e<this.masterTable.length;e++){var b=this.masterTable[e].Selectable;var f=this.masterTable[e].Selector;var d=this.masterTable[e].Class.className;var g=this.menuTable[d];var h=b.data("selcolor");if(h==undefined){console.log("StyGen error: demo html and template css are not consistent on '"+d+"'");return}var c=h.replace(")",", 0.1)").replace("rgb","rgba");if(this.masterTable[e].Active=="yes"){f.css("border-color",h);f.css("background-color","transparent");g.css("border-color",h);g.find(".lwss_ms_title").css("background-color",h);g.find(".lwss_ms_class").css("background-color",c)}else{if(this.masterTable[e].Over=="yes"){f.css("border-color",h);f.css("background-color",c);g.css("border-color",h);g.find(".lwss_ms_title").css("background-color",h);g.find(".lwss_ms_class").css("background-color",c)}else{if(this.masterTable[e].Over=="relative"){f.css("border-color",h);f.css("background-color","transparent");g.css("border-color",h);g.find(".lwss_ms_title").css("background-color",h);g.find(".lwss_ms_class").css("background-color","#fff")}else{f.css("border-color","transparent");f.css("background-color","transparent");g.css("border-color","#aaa");g.find(".lwss_ms_title").css("background-color","#999");g.find(".lwss_ms_class").css("background-color","#fff")}}}}},_overSelector:function(e){var d=a(e.delegateTarget).data("key");var c=this.masterTable[d].Class.className;for(var b=0;b<this.masterTable.length;b++){if(this.masterTable[b].Class.className==c){this.masterTable[b].Over="relative"}}this.masterTable[d].Over="yes";this._setSelectorColors()},_outSelector:function(c){for(var b=0;b<this.masterTable.length;b++){this.masterTable[b].Over="no"}this._setSelectorColors()},_clickSelector:function(g){var f=a(g.delegateTarget).data("key");var e=this.masterTable[f].Class.className;var b=this.masterTable[f].Class.stygenName;var c=this.masterTable[f].Selectable;for(var d=0;d<this.masterTable.length;d++){if(this.masterTable[d].Class.className==e){this.masterTable[d].Active="yes"}else{this.masterTable[d].Active="no"}}this._setSelectorColors();this.element.find(".lwss_info").hide();this.myStylingPanel.lws_styling_panel("openStylingPanel",b,this,c);this.myStylingPanel.show()},_clickEditor:function(d){var c=a(d.target).attr("class").split(" ");if(c.indexOf("lwss_selector")==-1&&c.indexOf("lwss_ms_title")==-1&&c.indexOf("lwss_ms_class")==-1){for(var b=0;b<this.masterTable.length;b++){this.masterTable[b].Active="no"}this._setSelectorColors();this.myStylingPanel.lws_styling_panel("setEvent","idle");this.element.find(".lwss_styling_panel").hide();this.element.find(".lwss_info").show()}},_addEventsAndTriggers:function(){for(var e=0;e<this.masterTable.length;e++){var c=this.masterTable[e].Selectable;var f=this.masterTable[e].Selector;var d=this.masterTable[e].Class.className;var b=this.menuTable[d];b.mouseover(this._bind(this._overSelector,this));b.mouseout(this._bind(this._outSelector,this));b.click(this._bind(this._clickSelector,this));f.mouseover(this._bind(this._overSelector,this));f.mouseout(this._bind(this._outSelector,this));this._on(f,{click:"_clickSelector"})}this.element.find(".lwss-main-conteneur").click(this._bind(this._clickEditor,this));this.element.find(".lwss-sidemenu").click(this._bind(this._clickEditor,this))},_createCssObject:function(){var d=this;var c=0;var b=["rgb(63,169,245)","rgb(122,201,67)","rgb(255,147,30)","rgb(212,20,90)","rgb(117,76,36)","rgb(255,29,37)","rgb(27,20,100)","rgb(0,104,55)","rgb(115,99,87)","rgb(147,39,143)","rgb(241,90,36)"];a.each(this.cssValues,function(f,h){var j=(h.Selector.split(", "))[0];var e=(j.split(":"))[0];var i=((j.split(":"))[1]!=undefined)?(j.split(":"))[1]:"idle";if(h.Selector.search(".lws-")!=-1){var g=(d.cssObject[e]!=undefined)?d.cssObject[e]:{};g[i]=h.Defaults;if(h.Values!=null&&h.Values!=undefined&&!Array.isArray(h.Values)){g[i]=h.Values}d.cssObject[e]=g}else{d.miscValues[h.Selector]=h.Defaults;d.miscValues[h.Selector]=h.Values}});a.each(this.cssObject,function(e,f){if(c>=b.length){c=0}d.element.find(e).data("selcolor",b[c]);++c})},_applyCss:function(){lwssCanvas=this.element;a.each(this.cssValues,function(b,c){lwssCanvas.find(c.Selector).css(c.Defaults);lwssCanvas.find(c.Selector).css(c.Values)})}})})(jQuery);jQuery(function(a){a(".lwss_editor").lws_css_editor();a(".lwss_editor").click(function(b){if(a(b.target).closest(".lwss-color-selector-relative").length==0&&a(b.target).closest(".lwss-fontselect-popup").length==0){a(".lwss-popup-shadow").hide()}});a(".lws-stygen-reset").click(function(){a(".lws-stygen-reset-form").remove();var b=a("<form>").attr("method","post").addClass("lws-stygen-reset-form").css("display","none").appendTo(a("body"));a("<input>").attr("type","hidden").attr("name","lws-stygen-reset-"+a(this).data("id")).addClass("lws-stygen-reset-id").val("true").appendTo(b);a("<input>").attr("type","submit").appendTo(b).trigger("click")})});