jQuery(function(a){a("form").keypress(function(d){d=d||event;var c=/textarea/i.test((d.target||d.srcElement).tagName);var b=(c||(d.keyCode||d.which||d.charCode||0)!==13);if(!b){d.preventDefault();a(d.target||d.srcElement).trigger("change");return true}});a("select.lws-select-input").each(function(){var b=a(this);b.selectmenu({change:function(c,d){if(b.val()!=d.item.value){b.val(d.item.value)}b.trigger("change")}});b.change(function(){try{b.selectmenu("refresh")}catch(c){}});if(b.data("class")!=undefined){b.next(".ui-selectmenu-button").addClass(b.data("class"))}});a(".lws-aceEditor").each(function(){var c=ace.edit(a(this).attr("id"));c.setTheme("ace/theme/chrome");c.setOption("showPrintMargin",false);c.getSession().setMode(a(this).data("mode"));c.$blockScrolling=Infinity;var b=a(this).next("input[name='"+a(this).attr("id")+"']");c.setValue(b.val());c.on("change",function(d){b.val(c.getValue())})});a(".lws-adm-btn-trigger").click(function(){var b=a(this);var d=a(this).parents(".lws-form-div").lwsReadForm();var c={action:"lws_adminpanel_field_button",button:a(this).attr("id"),form:lwsBase64.fromObj(d)};a.ajax({dataType:"json",method:"POST",url:lws_ajax_url,data:c,success:function(e){if((0!=e)&&e.status){if(e.data!=undefined){b.next(".lws-adm-btn-trigger-response").html(e.data)}}else{alert(lws_adminpanel.triggerError)}}}).fail(function(f,g,e){b.replaceWith("<p class='lws-error'>Trigger error, status: "+g+", error: "+e+"</p>").show()});return false});a(document).click(function(b){if(a(b.target).closest(".lwss-disable-on-clic-out").length==0){if(a(b.target).closest(".lwss-hide-on-clic-out").length==0){a(".lwss-hide-on-clic-out").fadeOut()}if(a(b.target).closest(".lwss-fold-on-clic-out").length==0){a(".lwss-fold-on-clic-out").slideUp()}}});a(document).keyup(function(b){if((b.keyCode||b.which||b.charCode||0)===27){a(".lwss-hide-on-clic-out").fadeOut();a(".lwss-fold-on-clic-out").slideUp()}});a("input, textarea, select").change(function(){if(!a(this).hasClass("lws-ignore-confirm")&&a(this).is(":visible")){if(a(this).closest(".lws-editlist").length==0){window.lwsInputchanged=true}window.onbeforeunload=function(){return lws_adminpanel.confirmLeave}}});a("form").submit(function(){if(document.lwsForceConfirm==undefined){window.onbeforeunload=undefined;document.lwsForceConfirm=undefined}});a(".lws-adminpanel-singular-delete-button").click(function(){var b=a(this);a(".lws-adminpanel-singular-delete-confirmation").dialog({autoOpen:true,height:200,width:480,modal:true,buttons:[{text:b.data("yes")!=undefined?b.data("yes"):"Confirm",icon:"ui-icon-alert",click:function(){document.location=b.attr("href")}},{text:b.data("no")!=undefined?b.data("no"):"Cancel",icon:"ui-icon-cancel",click:function(){a(this).dialog("close")}}],open:function(){a(".ui-dialog :button").blur();a(".ui-dialog :button:last").focus()}});return false})});