(function(a){a.widget("lws.lws_styling_panel",{_create:function(){this.element.addClass("lwss-css-inputs");this.myInput=a("<input>").addClass("lwss-merge-css").attr("type","hidden").appendTo(this.element);this.myMainPanel=a("<div>").addClass("lwss-sp-main").appendTo(this.element);this.activeClass="";this._addEventPanel();this._addColorPanel();this._addTabsPanel();this._setTab("Text")},_bind:function(b,c){return function(){return b.apply(c,arguments)}},_addEventPanel:function(){this.myEventPanel=a("<div>").addClass("lwss-sp lwss-sp-event").appendTo(this.myMainPanel);myEventSelector=a("<div>").addClass("lwss-sp-event-icon lws-icon-lw_arrow").appendTo(this.myEventPanel);mySelectorLabel=a("<span>").html("Events").appendTo(myEventSelector);eventsDiv=a("<div>").addClass("lwss-sp-div lwss-sp-events-div").appendTo(this.myEventPanel);idleEvent=a("<div>").addClass("lwss-sp-events lws-icon-lw_idle").data("Event","idle").appendTo(eventsDiv);idleLabel=a("<div>").addClass("lwss-sp-events-label").html("Idle").appendTo(idleEvent);overEvent=a("<div>").addClass("lwss-sp-events lws-icon-lw_over").data("Event","hover").appendTo(eventsDiv);overLabel=a("<div>").addClass("lwss-sp-events-label").html("Over").appendTo(overEvent);clickEvent=a("<div>").addClass("lwss-sp-events lws-icon-lw_click").data("Event","focus").appendTo(eventsDiv);clickLabel=a("<div>").addClass("lwss-sp-events-label").html("Focus").appendTo(clickEvent);var b=this;a(".lwss-sp-events").click(function(){b.setEvent(a(this).data("Event"))})},_addColorPanel:function(){this.myColorPanel=a("<div>").addClass("lwss-sp-color").appendTo(this.myMainPanel);myColorSelector=a("<div>").addClass("lwss-sp-color-selector lws-icon-lw_dropper").appendTo(this.myColorPanel);mySelectorLabel=a("<span>").html("Colors").appendTo(myColorSelector);colorsDiv=a("<div>").addClass("lwss-sp-div lwss-sp-colors-div").appendTo(this.myColorPanel);myColor=a("<div>").appendTo(colorsDiv).lwss_colorButton({icon:"lws-icon-lw_text",showvalue:false,property:"color"});myBackgroundColor=a("<div>").appendTo(colorsDiv).lwss_colorButton({icon:"lws-icon-lw_inkpot",showvalue:false,property:"background-color"})},_addTabsPanel:function(){this.myTabsPanel=a("<div>").addClass("lwss-sp-tabs-panel").appendTo(this.myMainPanel);this.myTabsSelectors=a("<ul>").addClass("lwss-sp-tselectors").appendTo(this.myTabsPanel);this.myTabs=a("<div>").addClass("lwss-sp-tabs").appendTo(this.myTabsPanel);this._addTextTab();this._addDisplayTab();this._addBorderTab();this.myTabsSelectors.mouseleave(this._bind(this._tSelLeave,this))},_addTextTab:function(){myTextSelector=a("<li>").addClass("lwss-sp-tselectors-text lwss_tselector lws-icon-lw_text").data("Tab","Text").appendTo(this.myTabsSelectors);mySelectorLabel=a("<span>").html("Text").appendTo(myTextSelector);myTextTab=a("<div>").addClass("lwss-sp-tabs-text lwss_sp_tab").data("Tab","Text").appendTo(this.myTabs);myTextSelector.mouseenter(this._bind(this._tSelEnter,this));var b=this;myTextSelector.click(function(){b._setTab(a(this).data("Tab"))});myFirstLine=a("<div>").addClass("lwss-sp-tab-line").appendTo(myTextTab);myFont=a("<div>").appendTo(myFirstLine).lwss_fontselect({icon:"lws-icon-font",cssColor:"lwss-ttext-color"});myFontSize=a("<div>").appendTo(myFirstLine).lwss_size({icon:"lws-icon-text-height",cssColor:"lwss-ttext-color",property:"font-size"});myLineHeight=a("<div>").appendTo(myFirstLine).lwss_size({icon:"lws-icon-lw_line_height",cssColor:"lwss-ttext-color",property:"line-height"});selValues=["none","left","center","right","justify","inherit"];myTextAlign=a("<div>").appendTo(myFirstLine).lwss_select({icon:"lws-icon-paragraph-left",cssColor:"lwss-ttext-color",property:"text-align",values:selValues});mySecondLine=a("<div>").addClass("lwss-sp-tab-line").appendTo(myTextTab);selValues=["none","uppercase","capitalize","lowercase","initial","inherit"];myTextTransform=a("<div>").appendTo(mySecondLine).lwss_select({icon:"lws-icon-font-size",cssColor:"lwss-ttext-color",property:"text-transform",values:selValues});selValues=["normal","italic","oblique","initial","inherit"];myTextItalic=a("<div>").appendTo(mySecondLine).lwss_select({icon:"lws-icon-italic",cssColor:"lwss-ttext-color",property:"font-style",values:selValues});selValues=["none","underline","overline","line-through","initial","inherit"];myTextDecoration=a("<div>").appendTo(mySecondLine).lwss_select({icon:"lws-icon-underline",cssColor:"lwss-ttext-color",property:"text-decoration",values:selValues})},_addDisplayTab:function(){myDisplaySelector=a("<li>").addClass("lwss-sp-tselectors-display lwss_tselector lws-icon-eye").data("Tab","Display").appendTo(this.myTabsSelectors);mySelectorLabel=a("<span>").html("Display").appendTo(myDisplaySelector);myDisplayTab=a("<div>").addClass("lwss-sp-tabs-display lwss_sp_tab").data("Tab","Display").appendTo(this.myTabs);myDisplaySelector.mouseenter(this._bind(this._tSelEnter,this));var b=this;myDisplaySelector.click(function(){b._setTab(a(this).data("Tab"))});myFirstLine=a("<div>").addClass("lwss-sp-tab-line").appendTo(myDisplayTab);myMargin=a("<div>").appendTo(myFirstLine).lwss_4values({icon:"lws-icon-lw_margin",cssColor:"lwss-tdisplay-color",property:"margin"});myPosition=a("<div>").appendTo(myFirstLine).lwss_4values({icon:"lws-icon-enlarge",cssColor:"lwss-tdisplay-color",property:"position"});mySecondLine=a("<div>").addClass("lwss-sp-tab-line").appendTo(myDisplayTab);myPadding=a("<div>").appendTo(mySecondLine).lwss_4values({icon:"lws-icon-lw_padding",cssColor:"lwss-tdisplay-color",property:"padding"});myWidth=a("<div>").appendTo(mySecondLine).lwss_size({icon:"lws-icon-lw_width",cssColor:"lwss-tdisplay-color",property:"width"});myHeight=a("<div>").appendTo(mySecondLine).lwss_size({icon:"lws-icon-lw_height",cssColor:"lwss-tdisplay-color",property:"height"})},_addBorderTab:function(){myBorderSelector=a("<li>").addClass("lwss-sp-tselectors-border lwss_tselector lws-icon-lw_border").data("Tab","Border").appendTo(this.myTabsSelectors);mySelectorLabel=a("<span>").html("Border").appendTo(myBorderSelector);myBorderTab=a("<div>").addClass("lwss-sp-tabs-border lwss_sp_tab").data("Tab","Border").appendTo(this.myTabs);myBorderSelector.mouseenter(this._bind(this._tSelEnter,this));var c=this;myBorderSelector.click(function(){c._setTab(a(this).data("Tab"))});myFirstLine=a("<div>").addClass("lwss-sp-tab-line").appendTo(myBorderTab);myBorderWidth=a("<div>").appendTo(myFirstLine).lwss_4values({icon:"lws-icon-lw_border_width",cssColor:"lwss-tborder-color",property:"border-width"});myBorderColor=a("<div>").appendTo(myFirstLine).lwss_colorButton({icon:"lws-icon-lw_border",cssColor:"lwss-tborder-color",showvalue:true,property:"border-color"});mySecondLine=a("<div>").addClass("lwss-sp-tab-line").appendTo(myBorderTab);myBorderRadius=a("<div>").appendTo(mySecondLine).lwss_4values({icon:"lws-icon-lw_border_radius",cssColor:"lwss-tborder-color",property:"border-radius"});var b=["none","solid","dotted","dashed","double","groove","ridge","inset","outset","initial","inherit","hidden"];myBorderStyle=a("<div>").appendTo(mySecondLine).lwss_select({icon:"lws-icon-lw_border_type",cssColor:"lwss-tborder-color",property:"border-style",values:b})},_tSelEnter:function(d){var b=a(d.delegateTarget);var c=this;this.element.find(".lwss_tselector").each(function(){if(a(this).data("Tab")==b.data("Tab")){a(this).stop(true,false).animate({width:"100px"},200)}else{a(this).stop(true,false).animate({width:"30px"},200)}})},_tSelLeave:function(c){var b=this;this.element.find(".lwss_tselector").each(function(){if(a(this).data("Tab")==b.activeSelector.data("Tab")){a(this).stop(true,false).animate({width:"100px"},200)}else{a(this).stop(true,false).animate({width:"30px"},200)}})},_setTab:function(c){this.activeTab=c;var b=this;this.element.find(".lwss_tselector").each(function(){if(a(this).data("Tab")==b.activeTab){b.activeSelector=a(this);a(this).width(90)}else{a(this).width(20)}});this.element.find(".lwss_sp_tab").each(function(){if(a(this).data("Tab")==b.activeTab){a(this).show()}else{a(this).hide()}})},setEvent:function(b){this.currentEvent=b;a(".lwss-sp-events").each(function(){a(this).removeClass("active");if(a(this).data("Event")==b){a(this).addClass("active")}});var c=this;c._loadValues();c.cssEditor.element.find(c.activeClass).each(function(){a(this).removeClass("hovered");a(this).removeClass("focused");a(this).css(c.activeClassValues["default"]);a(this).css(c.activeClassValues[c.currentEvent]);if(c.currentEvent=="hover"){a(this).addClass("hovered")}if(c.currentEvent=="hover"){a(this).addClass("focused")}})},_resetValues:function(){if(this.activeClass!=""){var b=this;b.cssEditor.element.find(b.activeClass).each(function(){a(this).removeClass("hovered");a(this).removeClass("focused")})}this.myEventPanel.show();this.activeClass="";this.activeClassValues=undefined;this.currentEvent="idle"},_applyValues:function(){var b=a(this).closest(".lwss_styling_panel").data("lws-lws_styling_panel");value=a(this).val();property=a(this).data("css");b.activeClassValues[b.currentEvent][property]=value;b.cssEditor.element.find(b.activeClass).each(function(){a(this).css(b.activeClassValues[b.currentEvent])});b.cssEditor.placeSelectors();b.makeCssChain()},_loadValues:function(){var b=this;this.element.find(".lwss_value").off("change",this._applyValues);this.element.find(".lwss_value").each(function(){var c=b.activeClassValues[b.currentEvent];var d=(c[a(this).data("css")]!=undefined)?c[a(this).data("css")]:"";a(this).val(d).trigger("change")});this.element.find(".lwss_value").on("change",this._applyValues)},openStylingPanel:function(d,c,b){this._resetValues();this.cssEditor=c;this.activeClass=d;this.activeClassValues=this.cssEditor.cssObject[this.activeClass];if(this.activeClassValues.hover==undefined&&this.activeClassValues.focus==undefined){this.myEventPanel.hide()}if(this.activeClassValues["default"]==undefined){var e=this;this.activeClassValues["default"]={}}this.setEvent("idle");this.makeCssChain()},setEditor:function(b){this.stygen=b;this.uuid=b.uuid},makeCssChain:function(){var e="";var b=a(this.element).closest(".lwss_editor");var d=a(this.element).closest(".lwss_editor").data("lws-lws_css_editor");var c=a(this.element).closest(".lwss_editor").find(".lwss_editor_chain");a.each(d.miscValues,function(f,g){e+=f+"{";a.each(g,function(i,h){e+=i+":"+h+";"});e+="}"});a.each(d.cssObject,function(f,g){a.each(g,function(h,i){if(h!="default"){if(h=="idle"){e+=f+"{"}else{if(h=="hover"){e+=f+":hover, "+f+".hovered{"}else{if(h=="focus"){e+=f+":focus, "+f+".focused{"}}}a.each(i,function(k,j){e+=k+":"+j+";"});e+="}"}})});c.val(lwsBase64.encode(e))}})})(jQuery);